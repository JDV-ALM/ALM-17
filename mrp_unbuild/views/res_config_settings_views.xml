<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ============================================ -->
    <!-- VISTAS DE CONFIGURACIÓN -->
    <!-- ============================================ -->
    
    <!-- Agregar campos de configuración en settings -->
    <record id="res_config_settings_view_form_unbuild" model="ir.ui.view">
        <field name="name">res.config.settings.view.form.inherit.mrp.unbuild</field>
        <field name="model">res.config.settings</field>
        <field name="inherit_id" ref="mrp.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@id='planning']" position="after">
                <h2>Unbuild Settings</h2>
                <div class="row mt16 o_settings_container" name="unbuild_settings">
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="group_unbuild_strict_yields"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="group_unbuild_strict_yields"/>
                            <div class="text-muted">
                                Enforce strict yield validation in unbuild orders
                            </div>
                            <div class="content-group" invisible="not group_unbuild_strict_yields">
                                <div class="mt16">
                                    <label for="unbuild_yield_tolerance" class="o_light_label"/>
                                    <field name="unbuild_yield_tolerance" class="oe_inline"/> %
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="unbuild_allow_backorder"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="unbuild_allow_backorder"/>
                            <div class="text-muted">
                                Allow creating backorders for unbuild operations
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="unbuild_strict_cost_allocation"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="unbuild_strict_cost_allocation"/>
                            <div class="text-muted">
                                Require 100% cost allocation before completing unbuild orders
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6 o_setting_box">
                        <div class="o_setting_left_pane">
                            <field name="unbuild_loss_account_id" invisible="not unbuild_strict_cost_allocation"/>
                        </div>
                        <div class="o_setting_right_pane" invisible="not unbuild_strict_cost_allocation">
                            <label for="unbuild_loss_account_id"/>
                            <div class="text-muted">
                                Account for posting unallocated costs in unbuild operations
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>
        </field>
    </record>
</odoo>